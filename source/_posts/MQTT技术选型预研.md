---

title: MQTT技术选型预研
date: 2020-08-05 14:49:12
tags: [技术选型, 技术预研]
categories: 网络协议
---



## MQTT技术选型预研

### MQTT 概述

MQTT全称为 ```Message Queue Telemetry Transport``` 即消息队列遥测传输协议。是一个基于```发布/订阅```范式的消息协议。MQTT协议是基于TCP/UDP协议之上的应用协议，是为硬件性能低下的远程设备以及网络状况糟糕的情况下而设计的```发布/订阅 ```型消息协议。

MQTT协议是基于```TCP```实现的消息型协议，MQTT-SN是基于```UDP```实现的用于在蓝牙上传输



### 服务质量(QoS)

对于消息型协议，有一个服务质量的概念。标准的定义如下：

- QoS 0 

  最多一次传送（只负责传送，不保证消息必达）

- QoS 1

  至少一次传送（确认数据到达）

- QoS 2

  正好一次传送（确认数据到达，且只到达一次）



### 实现对比

目前MQTT标准协议的实现有很多，考虑到整个微服务架构和团队技术栈建立在```Java```和```Spring```之上。因此在重点对比```EMQX```, ```mosquitto```作为```broker```中间件。```mosquitto```和```Paho```作为客户端实现

#### 中间件

- 特性对比

| 特性     | EMQX           | Mosquitto | Netty + MQTT 自研 |
| -------- | -------------- | --------- | ----------------- |
| QoS2     |                |           |                   |
|          |                |           |                   |
|          |                |           |                   |
|          |                |           |                   |
|          |                |           |                   |
|          |                |           |                   |
|          |                |           |                   |
| 部署难度 |                |           |                   |
| 收费方式 | 多节点授权收费 | 免费      | 免费              |

- 性能测试

  TODO:

  



#### 客户端

- 特性对比

| 特性     | Paho | Mosquitto | Netty + MQTT 自研 |
| -------- | ---- | --------- | ----------------- |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
|          |      |           |                   |
| 开发难度 |      |           |                   |

- 性能测试

  TODO: